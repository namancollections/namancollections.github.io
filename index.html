<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Naman Collections</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        form {
            width: 300px;
            margin: 0 auto;
        }
        input, select, textarea {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            border: 1px solid #ccc;
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
        }
        button:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>

<h2><center>Customer Registration Form</center></h2>
<form id="userForm">
    <label for="name">Name</label>
    <input type="text" id="name" name="name" required>

    <label for="lastname">Last Name</label>
    <input type="text" id="lastname" name="lastname" required>

    <label for="gender">Gender</label>    
    <select id="gender" name="gender" required>
        <option value="Male">Male</option>
        <option value="Female">Female</option>
    </select>

    <label for="phone">Phone Number</label>
    <input type="tel" id="phone" name="phone" required>

    <label for="email">Email Address</label>
    <input type="email" id="email" name="email">
    <div style="color:#ff0000" class="error" id="invalidEmail"></div>

    <label for="dob">Date of Birth</label>
    <input type="date" id="dob" name="dob">

    <label for="address">Address</label>
    <textarea id="address" name="address" required></textarea>

    <button type="submit">Submit</button>
</form>

<script>
    document.getElementById("userForm").addEventListener("submit", function(e) {
        e.preventDefault();

        // validate email format
	      const email = document.getElementById("email").value;
        let isValid = true;
        
       // If email is provided, validate its format and domain
        if (email) {
            // Regular expression to validate email format and domain
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.(com|org|net|gov|edu)$/;
            if (!emailRegex.test(email)) {
                document.getElementById("invalidEmail").textContent = "Please enter a valid email address with a valid domain (e.g., @gmail.com).";
                isValid = false;
            }
        }
        // If form is valid, send the data
        if (isValid) {
        const formData = new FormData(e.target);
        const userInfo = {};
        formData.forEach((value, key) => {
            userInfo[key] = value;
        });

        fetch("https://script.google.com/macros/s/AKfycbxlk_Edte7IGlVXK9uPLwYWaie4V_lD02sYChYfp81WLsOhRFRbIUVsjxa3n5-c1cyTiA/exec", {
            method: "POST",
            mode: "no-cors",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify(userInfo)
        })
        .then(data => {
            alert("Form submitted successfully!");
            document.getElementById("userForm").reset(); // Reset form
        })
        .catch(error => {
            console.error("Error:", error);
            alert("There was an error submitting the form.");
        });
      }
    });
</script>

</body>
</html>
